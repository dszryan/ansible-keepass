---
- name: Example
  hosts: 127.0.0.1
  connection: local
  vars:
    spam_login: "{{ lookup('keepass', 'primary', 'spam', 'username')}}"
    spam_password: "{{ lookup('keepass', 'primary', 'spam', 'password')}}"
    ham_login: "{{ lookup('keepass', 'primary', 'example/ham', 'username')}}"
    ham_password: "{{ lookup('keepass', 'primary', 'example/ham', 'password')}}"
    pork_custom_property: "{{ lookup('keepass', 'primary', 'example/pork', 'pork_custom_property')}}"
    ham_file: "{{ lookup('keepass', 'primary', 'example/ham', 'file.txt')  | b64decode }}"
    pork_file: "{{ lookup('keepass', 'primary', 'example/pork', 'has_no_file.txt') | b64decode }}"

  tasks:
    - debug:
        msg: "fetch group: /    username: {{ spam_login }}    password: {{ spam_password }}"

    - debug:
        msg: "fetch group: /example/ham     username: {{ ham_login }}   password: {{ ham_password }}"

    - debug:
        msg: "fetch group: /example/pork    pork_custom: {{ pork_custom_property }}"

    - debug:
        msg: "fetch group: /example/ham     ham_file: {{ ham_file }}"

    - debug:
        msg: "fetch group: /example/pork     pork_file: {{ pork_file }}"